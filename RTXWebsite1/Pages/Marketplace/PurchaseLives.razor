@page "/lives"

@using RTXWebsite1.IDbContext
@using RTXWebsite1.Models
@using Microsoft.Extensions.Configuration
@inject RTXWebsite1.Data.Cookies Cookie;

@inject IConfiguration _config
@inject IDatabaseAccess _data

@inject NavigationManager NavManager

@if( Cookie.PlayerID == 0 )
{
    NavManager.NavigateTo("/");
}


@code {
    // Only sees assignments/assessments/anything with a lock that the student has access to at this point in time
    List<PlayerProgressUnlocks>? options;


    private async Task GetData()
    {
        await OnInitializedAsync();
    }

    protected override async Task OnInitializedAsync()
    {
        string sql = "WHERE Progress_PlayerID = @thisPlayer";

        options = await _data.LoadData<PlayerProgressUnlocks, dynamic>(PlayerProgressUnlocks.GetSQL() + sql, new { thisPlayer = Cookie.PlayerID }, _config.GetConnectionString("RTX"));

    }
}